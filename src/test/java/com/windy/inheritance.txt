
		Person

Student				Instructor


From the Java side, this is a straightforward inheritance design.
Student and Instructor entities can simply extend the Person entity.

But JPA needs additional information to map this hierarchy to a database. 
JPA gives you three distinct ways to map an inheritance relationship: 
	as a single table, 
	a table for each child class, and
	tables for all classes. (This is the fully database normalized version of the hierarchy. The JPA provider
will create the parent and child tables for the relationship, and use SQL joins to fetch the data for a given entity.)

public abstract class Person {

@Size(min = 1, max = 30)
private String firstName;

@Size(min = 1, max = 30)
private String middleNameOrInitial;

@NotNull
@Size(min = 1, max = 30)
private String lastName;

@NotNull
@Size(min = 1, max = 60)
private String addressLine1;

@Size(min = 0, max = 60)
private String addressLine2;

@NotNull
@Size(min = 1, max = 40)
private String city;

@NotNull
@Size(min = 2, max = 2)
private String stateCode;

@NotNull
@Size(min = 1, max = 10)
private String postalCode;

@NotNull
@Size(max = 80)
private java.lang.String emailAddress;

}

In JPA, all of these fields are combined into a new table in the database named student.

public class Student extends Person {

@NotNull
@Size(min = 1, max = 30)
@Column(length = 30, name = "emergency_contact_name", nullable = false)
private String emergencyContactName;

@NotNull
@Size(min = 1, max = 80)
private String emergencyContactInfo;

@Size(max = 30)
private String dietaryRestrictions;

}

public class Instructor extends Person {

@NotNull
@Size(min = 9, max = 9)
private String taxNumber;

@NotNull
private boolean active;

}

On database engines that use an IDENTITY data type, such as MySQL, you can’t use the AUTO key generation strategy.

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;

To fix this problem, change the key generation strategy. You can use another generation strategy, such as TABLE or SEQUENCE (with databases that support it).

The TABLE strategy defines a table that keeps track of the next highest value for a given entity’s primary key.

The SEQUENCE strategy uses a high performance internal number sequence, which the database will increment automatically when creating the primary key. On databases that support sequences, you’ll get far higher performance by selecting the SEQUENCE strategy.

@Id
@GeneratedValue(strategy = GenerationType.TABLE)
@Column(name = "id")
private Long id;


Whenever a student registers for a course, you enter a row in the registration table via the Registration entity:

public class Registration {

@ManyToOne
private Student student;

@ManyToOne
private Course course;

private boolean paymentMade;

private boolean attended;

}